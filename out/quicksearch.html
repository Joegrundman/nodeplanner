<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"Attrition_attrition-class.js.html":{"id":"Attrition_attrition-class.js.html","title":"Source: Attrition/attrition-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Attrition/attrition-class.js 'use strict'; /** * WP.Attrition class defines the attrition object which is created each time the attrition button is pressed */ WP.Attrition = class { /** * Create an attrition object */ constructor () { /** * @property {object} units - array of units currently counted towards the attrition total */ this.units = [] } /** * Adds a unit to the attrition array * @param {object} unit - the unit to be added and counted towards attrition total */ addUnit (unit) { if (!unit) { return } if (!unit.canBeCountedInAttrition()) { return } var foundUnit = this.units.some(u =&gt; u == unit) if (!foundUnit) { this.units.push(unit) unit.highlight = new WP.Color(255, 255, 72).toRgb() } } /** * handles the onmouseclick event, sending units to be added to the units array */ handleHexClick() { var map = game.currentMap var hex = map.currentHex var _this = this if (!hex) return; if (ctrlPressed()) { hex.units.forEach(u =&gt; _this.addUnit(u)) } else { _this.addUnit(hex.getTopUnit()); } hex.draw(); this.refreshTotals(); } /** * removes unit from the attrition units array * @param {object} unit - the unit to be removed from the attrition units array */ removeUnit (unit) { if (!unit) return; var unitFound = false var j = 0; while (j &lt; this.units.length) { if (this.units[j] == unit) { this.units.splice(j, 1); unitFound = true } else j++; } unit.highlight = null; } /** * refreshes the calculated attrition total and displays the result on the dialog */ refreshTotals () { var total = 0 var countries = {} this.units.forEach(u =&gt; { if (countries[u.owner]) { countries[u.owner] += u.strength } else countries[u.owner] = u.strength total += u.strength }) var details = &quot;&lt;table&gt;&quot; for (var cty in countries) { details += &quot;&lt;tr&gt;&lt;td class='boldKey'&gt;&quot; + countries[cty] + &quot;:&lt;/td&gt;&lt;td class='value'&gt; &quot; + cty + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;; } details += &quot;&lt;/table&gt;&quot;; $(&quot;#attritionDetails&quot;).html(details); $(&quot;#attritionTotal&quot;).html(total); } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Codebreaking_codebreaking-class.js.html":{"id":"Codebreaking_codebreaking-class.js.html","title":"Source: Codebreaking/codebreaking-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Codebreaking/codebreaking-class.js 'use strict'; /** * WP.Codebreaking class creates an instance of a codebreaking draw of cards */ WP.Codebreaking = class { /** * Creates a codebreaking object */ constructor () { /** * @property {number} selected - number of cards in the pool from which 4 are drawn * @property {array} cards - the four cards held in this hand */ this.selected = 6 this.cards = [] } /** * Adds a card to the cards array * @param {object} card - the card to be added */ addCard (card) { this.cards.push(card) } /** * Gets results for the current turn and faction (Western Allies, Russia, Germany or Japan) * @param {number} year - the game year * @param {number} season - the season of the year (4 seasons per year) * @param {number side - the side to which this hand belongs * @returns {object} the hand of cards is returned */ getResultFor (year, season, side) { var result = null game.codebreakingResults.forEach(res =&gt; { if ((res.year == year) &amp;&amp; (res.season == season) &amp;&amp; (res.side == side)) { result = res } }) return result } /** * This parses year and season from the dialog html and calls showResultsFor */ draw () { var year = parseInt($('#cbYear').val()); var season = parseInt($('#cbSeason').val()); WP.Codebreaking.UI.showResultsFor(year, season, codebreaking.selected); } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Country_country-class.js.html":{"id":"Country_country-class.js.html","title":"Source: Country/country-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Country/country-class.js 'use strict'; /** * WP.Country class holds all the information of a country -testing compile by jsdoc.conf.json and using opts and now also using npm to run the script */ WP.Country = class { /** * Create a country */ constructor () { /** * @property {number} id - id of country * @property {string} name - name of country * @property {number} ally - value shows allied status * @property {object} colonyOf - gives ruling power of this colony * @property {number} coalition - gives the coalition to which this country belongs (axis, western allied, russia) * @property {boolean} isOrganization - whether the country is an organization or not * @property {boolean} isMajorPower - whether country is a major power (e.g. Germany, Russia) or not (e.g. Romania, Thailand) * @property {object} partOf - Not sure what this property is for * @property {boolean} pacific - whether the country is in the pacific theater (i think - not sure what this is for, or even if needed) * @property {color} backColor - the background color for this country's units * @property {color} foreColor - the foreground color for this country's units * @property {color} innerColor - the color to fill the inner shield (on e.g. infantry) on this country's units * @property {color} lineColor - the color used for drawing lines for this country's units * @property {color} shadow - the shadowing color for this country's units * @property {string} flagImage - the path to his country's flag image * @property {object} forcepoolGroupings - the different groups for this country's forcepool dialog * @property {object} colonies - the colonies that belong to this country * @property {object} units - the currently instantiated units that belong to this country * @property {object} codebreaking - the codebreaking cards and record held for this country (actually not sure about how this works) */ this.id = -1; this.name = &quot;unknown&quot;; this.ally = null; this.colonyOf = null; this.coalition = null; this.isOrganization = false; this.isMajorPower = false; this.partOf = null; this.pacific = false; this.backColor = null; this.foreColor = null; this.innerColor = null; this.lineColor = null; this.shadow = null; this.flagImage = null; this.forcepoolGroupings = []; this.colonies = [] this.units = [] this.codebreaking = null; } /** * Build an instance of country * @static * countryBuilder * @param {number} id - The country id number * @param {string} name - the name of the country * @returns {object} a new country */ static countryBuilder (id, name) { var country = new WP.Country(); country.id = id; country.name = name; WP.Country.UI.Colors.setColors(country); return country; } /** * Build an instance of forcepoolGrouping * @static * forcepoolGroupingBuilder * @param {number} id - The forcepoolGrouping id number * @param {string} name - the name of the forcepoolGrouping * @returns {object} a new forcepoolGrouping */ static forcepoolGroupingBuilder (id, name) { var grouping = new WP.ForcepoolGrouping(); grouping.id = id; grouping.name = name; return grouping; } /** * sort algorithm by name * @static * sort * @param {object} a - object 'a' with name property * @param {object} b - object 'b' with name property * @returns {number} 1, 0 or -1 for sorting */ static sort (a, b) { if (a.name &gt; b.name) return 1; else if (a.name &lt; b.name) return -1; return 0; } /** * adds a colony to the colonies array property */ addColony (colony) { colony.colonyOf = this this.colonies.push(colony) colony.colonyOf = this } /** * adds a forcepoolGrouping to the forcepoolGroupings array property */ addForcepoolGrouping (grouping) { this.forcepoolGroupings.push(grouping) } /** * adds a unit to the units array property */ addUnit (unit) { this.units.push(unit) unit.owner = this } /** * gets a unit from the units array by id * @param {number} id - id of the requested unit * @results {object} the requested unit or null */ getUnit (id) { var res = null this.units.forEach(u =&gt; { if (u.id === id) { res = u} }) if (res == null) { console.log(&quot;Game.getUnit: Unknown unit: &quot; + id); } return res } /** * removes a unit from the units array * @param {object} unit - the unit to be removed */ removeUnit (unit) { this.units = this.units.filter(u =&gt; u != unit) } /** * converts the country name and id to a string * @returns {string} &quot;USA(5)&quot; */ toString () { return this.name + &quot; (&quot; + this.id + &quot;)&quot; } }; /** * A group for the forcepool dialog */ WP.ForcepoolGrouping = class { /** * Create a forcepool group */ constructor () { /** * @property {number} id - the id of the forcepoolGrouping * @property {string} name - the name of the forcepoolGrouping */ this.id = -1; this.name = &quot;unknown&quot;; } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Forcepool_forcepool-class.js.html":{"id":"Forcepool_forcepool-class.js.html","title":"Source: Forcepool/forcepool-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Forcepool/forcepool-class.js 'use strict'; /** * WP.Forcepool class for creating forcepools. Forcepools are a popup dialog that contain units that have not been placed on the map or in a shipyard or taskforce * these units are also put into categories (e.g. unbuilt, dow+1, air, naval, ground) */ WP.Forcepool = class { /** * Create a forcepool */ constructor () { /** * @property {object} unitHolder - a unitHolder object that will contain the units in the forcepool */ this.unitHolder = null; } /** * This is an empty function that saves having to typecheck elsewhere. It's analogs in Taskforce and Shipyard do things */ // ___Don't delete.____ // Map/map.js calls this function for shipyrd or taskforce. // For fp nothing should happen when called // by doing this i avoid instanceof checking removeUnitFrom () {} /** * After selecting this country on the forcepool dialog, this function updates map and forcepool groupings * @param {number} id - id of the country selected */ handleCountrySelected (id) { var cty = game.getCountry(id) $(&quot;#fpCountryFlag&quot;).attr(&quot;src&quot;, WP.Country.UI.getFlagUrl(cty)); $('#fpGroupings').empty(); $('#fpGroupings').append($(&quot;&lt;option /&gt;&quot;) .attr(&quot;value&quot;, &quot;0&quot;) .text(&quot;Unbuilt&quot;)) cty.forcepoolGroupings.forEach(group =&gt; { $('#fpGroupings') .append($(&quot;&lt;option /&gt;&quot;) .attr(&quot;value&quot;, group.id) .text(group.name)); }) } /** * Upon clicking the mouse button, this function finds the unit in the shipyard display under the mouse cursor * @param {object} e - the mouse event object */ onMouseDown (e) { var point = getPoint('forcepoolCanvas', e) var stack = forcepool.unitHolder.findStackFor(point.x, point.y); if (stack) { game.setSelectedUnit(stack.getTopUnit()); forcepool.unitHolder.drawStack(stack); } else { game.setSelectedUnit(null); } } /** * Draws the units onto the forcepool display */ draw () { var id = $('#fpGroupings').val() var cty = game.getCountry($('#fpCountry').val()) var units = [] cty.units.forEach(u =&gt; { if (u.location == 1 &amp;&amp; u.fpg == id) { units.push(u) } }) var holder = WP.UnitHolder.unitHolderBuilder(forcepoolCtx, $(&quot;#fpDetails&quot;)); holder.units = units; holder.stackSimilar = $('#fpStackCheckbox').is(':checked'); holder.draw(); forcepool.unitHolder = holder; } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Game_game.js.html":{"id":"Game_game.js.html","title":"Source: Game/game.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Game/game.js // /* global onWindowResize */ // /* global phase */ 'use strict'; /** * This is the God object that is the heart of the game * could probably do with refactoring */ WP.Game = class { /** * Create game object */ constructor () { /** * @property {string} name - name of this game * @property {number} mapIndex - value indicates whether Europe or Pacific map * @property {number} zoomLevel - value shows current zoom level, default 1 gives max size (map10) * @property {null} type - i don't know what this is * @property {object} countries - the current country objects in the game * @property {object} maps - the map objects * @property {string} currentMap - the currently showing game map( europe or pacific ) * @property {object} selectedUnit - the currently selected unit * @property {string} gameType - whether a full global game or one of the smaller scenarios * @property {object} shipyards - array of shipyard objects * @property {object} taskforces - array of taskforce objects * @property {object} selectedTaskforce - the currently selected (open) taskforce object (and by extension dialog) * @property {number} state - TBD * @property {string} newspaper - string to be posted as white press or notes * @property {object} codebreakingResults - this turn's codebreaking results * @property {} * @property {boolean} hexControlDialogIsOpen - whether or not the dialog is open andwhether the map has flags or units drawn on it * @property {number} currentYear - the current game year * @property {number} currentSeason - the current game season * @property {number} currentPhaseId - the current phase Id * @property {number} coalition - the current side (axis or allies) * @property {number} currentPhase - the current game phase (linked to phaseId) * @property {boolean} showUnitTexture - whether the enhanced unit texture is shown, or the flat color * @property {boolean} noSwastikas - whether swastikas should be shown (illegal to show in Germany) */ this.name = 'not set' this.mapIndex = 0 this.zoomLevel = 1 this.type = null this.countries = null this.maps = null this.currentMap = null this.selectedUnit = null this.gameType = null this.shipyards = null this.taskforces = null this.selectedTaskforce = null this.state = 0; this.newspaper = &quot;&quot;; this.codebreakingResults = null; this.hexControlDialogIsOpen = false; this.currentYear = 2011; this.currentSeason = &quot;Season&quot;; this.currentPhaseId = null; this.currentCoalition = null; this.currentPhase = null; // Settings this.showUnitTexture = true; this.noSwastikas = true; } /** * Build a game instance * @static * gameBuilder */ static gameBuilder () { game = new WP.Game() game.name = &quot;new&quot; game.countries = [] game.shipyards = [] game.maps = new Array(2) game.maps[0] = new WP.Map(&quot;euro&quot;, 0) game.maps[0].createHexes(0) game.maps[1] = new WP.Map(&quot;pac&quot;, 1) game.maps[1].createHexes(1) game.currentMap = game.maps[0] return game } /** * adds a country to the game countries array * @param {object} country - country to be added */ addCountry (country) { if (!this.countries) this.countries = []; this.countries.push(country); } /** * adds a codebreaking result to the game codebreakingResults array * @param {object} result - result to be added */ addCodebreakingResult (result) { if (!this.codebreakingResults) this.codebreakingResults = []; this.codebreakingResults.push(result); } /** * adds a shipyards to the game shipyards array * @param {object} shipyard - shipyard to be added */ addShipyard (shipyard) { if (!this.shipyards) this.shipyards = []; this.shipyards.push(shipyard); } /** * adds a taskforce to the game taskforces array * @param {object} taskforce - taskforce to be added */ addTaskforce (taskforce) { if (!this.taskforces) this.taskforces = []; this.taskforces.push(taskforce); } /** * adds a unit to a hex * @param {object} unit - unit to be added * @param {object} hex - hex to which unit is added * @param {object} stack - stack to which unit is added */ addUnitToHex (unit, hex, stack) { var hexDetails = hex.split('/'); var map = this.maps[hexDetails[0]]; var addHex = map.getHex(hexDetails[1]); addHex.addUnit(unit, stack) } /** * gets all currently highlighted units * @returns {object} array of units */ getAllHighlightedUnits () { var units = [] var i = -1; for (var ci = 0; ci &lt; this.countries.length; ci++) { var ctry = this.countries[ci]; for (var ui = 0; ui &lt; ctry.units.length; ui++) { var unit = ctry.units.length[ui]; if (!unit) continue; if (unit.highlighted) units[++i] = unit; } } return units; } /** * gets country by id * @param {number} id - id of the country * @returns {object} country */ getCountry (id) { var res = null this.countries.forEach(cty =&gt; { if(cty.id == id) { res = cty } }) alert(&quot;Game.getCountry: Unknown country: &quot; + id); return res; } /** * gets the current map Id * @returns {number} the map id */ getCurrentMapId () { var mapId = 0; if (game.currentMap == game.maps[1]) mapId = 1; return mapId; } /** * gets country by name * @param {string} name - name of the country * @returns {object} country */ getCountryFromName (name) { var res = null this.countries.forEach(cty =&gt; { if (cty.name == name) { res = cty } }) alert(&quot;Game.getCountry: Unknown country: &quot; + name); return res; } /** * sets the current date * @param {number} currentPhaseId - the current Phase Id * @param {number} year - the current year * @param {number} season - the current season */ setCurrentDate (currentPhaseId, year, season) { if (!phase) phase = new WP.Phase(); phase.initPhases(); phase.processLoadedPhase(currentPhaseId, year, season); phase.refreshPhase(); } /** * gets shipyard by id * @param {number} id - shipyard id number * @returns {object} shipyard */ getShipyards (id) { var res = null this.shipyards.forEach(sy =&gt; { if (sy.id == id) { res = sy } }) alert(&quot;Game.getShipyards: Unknown shipyard: &quot; + id); return res; } /** * gets shipyard by name * @param {string} name - name of the shipyard * @returns {object} shipyard */ getShipyardFromName (name) { var res = null this.shipyards.forEach(sy =&gt; { if (sy.name == name) { res = sy } }) alert(&quot;Game.getShipyardFromName: Unknown shipyard: &quot; + name); return res } /** * gets shipyard from the urrently selected unit * @param {number} unitId - currently selected unitId * @returns {object} shipyard */ getShipyardFromUnit (unitId) { var res = null this.shipyards.forEach(sy =&gt; { sy.shipyardUnits.forEach(syu =&gt; { if (syu.id == unitId) { res = sy } }) }) alert(&quot;Game.getShipyard from unit: Unknown shipyard with: &quot; + unitId); return res; } /** * gets taskforce from the currently selected unit id * @param {number} unitId - currently selected unit id * @returns {object} taskforce */ getTaskforceFromUnit (unitId) { var res = null this.taskforces.forEach(tf =&gt; { tf.taskforceUnits.forEach(tfu =&gt; { if (tfu.id == unitId) { res = tf } }) }) alert(&quot;Game.getTaskforce from unit: Unknown taskforce with: &quot; + unitId); return res; } /** * gets a unit from the shipyard * @param {number} id - the unit id * @param {number} x - x coordinate of unit (in the shipyard) * @param {number} y - y coordinate of unit (in the shipyard) * @results {object} unit */ getUnitForShipyard (id, x, y) { var res = null this.countries.forEach(cty =&gt; { cty.units.forEach(cu =&gt; { if (cu.id == id) { cu.holderX = x cu.holderY = y res = cu } }) }) return res } /** * gets taskforce by id * @param {number} id - taskforce id number * @returns {object} taskforce */ getTaskforces (id) { var res = null this.taskforces.forEach(tf =&gt; { if (tf.id == id) { res = tf } }) alert(&quot;Game.getTaskforces: Unknown taskforce: &quot; + id); return res; } /** * gets taskforce by owner * @param {object} owner - the owning country * @returns {object} taskforce */ getTaskforceFromOwner (owner) { var res = null this.taskforces.forEach(tf =&gt; { if (tf.owner == owner) { res = tf } }) alert(&quot;Game.getTaskforce: Unknown taskforce: &quot; + owner); return res; } /** * gets a unit from the taskforce * @param {number} id - the unit id * @param {number} x - x coordinate of unit (in the taskforce) * @param {number} y - y coordinate of unit (in the taskforce) * @results {object} unit */ getUnitForTaskforce (id, x, y) { var res = null this.countries.forEach(cty =&gt; { cty.units.forEach(cu =&gt; { if (cu.id == id) { cu.holderX = x cu.holderY = y res = cu } }) }) return res } /** * gets a unit from the country for a shipyard or taskforce * @param {number} id - the unit id * @param {number} x - x coordinate of unit (in the dialog) * @param {number} y - y coordinate of unit (in the dialog) * @results {object} unit */ getUnitFromCountryForGridDialog (id, x, y) { var res = null this.countries.forEach(cty =&gt; { cty.units.forEach(cu =&gt; { if (cu.id == id) { cu.holderX = x cu.holderY = y res = cu } }) }) return res } /** * gets the list of major powers * @returns {object} array of major powers */ getMajorPowers () { var majors = [] this.countries.forEach(cty =&gt; { if (cty.isMajorPower) { majors.push(cty) } }) return majors; } /** * redraws hexes upon select and unselect unit */ handleSelectUnselectOnBoard (unit) { if (unit &amp;&amp; unit.hex) { unit.hex.draw(); } } /** * redraws dialog upon select and unselect unit */ handleSelectUnselectInDialog (unit, dialog) { if (!dialog) return; if (!dialog.unitHolder) return; var stack = dialog.unitHolder.findStackContaining(unit); if (stack) { dialog.unitHolder.drawStack(stack); } } /** * handles infobar buttons - not used anymore in this ui */ setInfoBarButtons () { $(&quot;#infoBarTopLeftWebsiteDiv&quot;).hide(); $(&quot;#infoBarTopLeftGameDiv&quot;).show(); } /** * sets currently selected taskforce * @param{object} taskforce - the taskforce to mark as currently selected */ setSelectedTaskforce (taskforce) { if (taskforce == this.selectedTaskforce) return; this.selectedTaskforce = taskforce; } /** * sets currently selected unit - triggers redrawing upon change * @param{object} unit - the unit to mark as currently selected */ setSelectedUnit (unit) { if (unit == this.selectedUnit) return; var oldUnit = this.selectedUnit; this.selectedUnit = unit; this.handleSelectUnselectOnBoard(oldUnit); this.handleSelectUnselectInDialog(oldUnit, forcepool); this.handleSelectUnselectInDialog(oldUnit, shipsAtSea); this.handleSelectUnselectInDialog(oldUnit, shipyard); this.handleSelectUnselectInDialog(oldUnit, taskforce); this.handleSelectUnselectInDialog(oldUnit, unitCounter); this.handleSelectUnselectOnBoard(unit); this.handleSelectUnselectInDialog(unit, forcepool); this.handleSelectUnselectInDialog(unit, shipsAtSea); this.handleSelectUnselectInDialog(unit, shipyard); this.handleSelectUnselectInDialog(unit, taskforce); this.handleSelectUnselectInDialog(unit, unitCounter); } /** * switched between europe and pacific theaters */ switchTheaters () { WP.Misc.Ui.closeAllDialogs(); game.selectedUnit = null; game.state = 0; if (game.currentMap == game.maps[0]) game.currentMap = game.maps[1]; else game.currentMap = game.maps[0]; onWindowResize(); } /** * refreshes current theater */ refreshCurrentTheater () { WP.Misc.Ui.closeAllDialogs(); game.selectedUnit = null; game.state = 0; onWindowResize(); } /** * toggles unit texture on and off * @param {boolean} showTexture */ toggleShowUnitTexture (showTexture) { if (showTexture) { game.showUnitTexture = true; } else { game.showUnitTexture = false; } game.refreshCurrentTheater(); } /** * toggles swastikas on and off * @param {boolean} noSwastikas */ toggleNoSwastikas(noSwastikas) { if (noSwastikas) { game.noSwastikas = true } else { game.noSwastikas = false } game.refreshCurrentTheater(); } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Hex_hex-class.js.html":{"id":"Hex_hex-class.js.html","title":"Source: Hex/hex-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Hex/hex-class.js 'use strict'; /** * creates a WP.Hex. This object has the details of the hex, from terrain, cities, ports and map location and dimensions, to owning country, and units on it */ WP.Hex = class { /** * Create a hex object */ constructor (id, map, x, y) { /** * @property {number} id -identification code of the hex * @property {object} map - the map object to which the hex belongs * @property {string} letter - alphabetical part of the hex address (eg the K in hex: K23) * @property {number} number - numerical part of the hex address (ed the 23 in hex: K23) * @property {number} size - value for determining hex size and boundaries * @property {number} width - value for determining hex width and boundaries * @property {object} owner - country object currently controlling this hex * @property {string} cityName - name of city on this hex(e.g. Cologne) * @property {boolean} isPort - whether the hex is a port (e.g. Oran) * @property {boolean} isCapital - whether the hex is a capital city (e.g. Paris) * @property {boolean} isBeach - whether the hex has a beach (e.g. Bergen) * @property {boolean} isTerrain - whether the hex has terrain features (e.g. mountains) * @property {boolean} isIsland - whether the hex is a one-hex island (e.g Guadalcanal) * @property {array} units - the units currently on this hex * @property {object} coordinate - coordinates of hex * @property {object} pixelPoint - coordinates within hex for positioning text * @property {object} unitStartPoint - coordinates within hex for placing first unit * @property {imagee} background - piece of the main map that shows hex background * @property {image} largeBackground - large piece of the main map to be used as hex background * @property {call} setZoom - calls WP.Hex.UI.setHexZoom * @property {function} toString - takes letter and number and returns a string for the hex address (eg K23) */ this.id = id; this.map = map; this.letter = &quot;A&quot;; this.number = 0; this.size = 36.45; // 47.3; this.width = 0; this.owner = null; this.cityName = null; this.isPort = null; this.isCapital = null; this.isBeach = null; this.isTerrain = null; this.isIsland = null; this.units = new Array(); this.coordinate = new Point(x, y); this.pixelPoint = new Point(x, y); this.unitStartPoint = new Point(x, y); this.background = null; this.largeBackground = null; this.setZoom = WP.Hex.UI.setHexZoom; this.toString = function () { return this.letter + this.number.toString(); } WP.Hex.setAttributes(this); } /** * Assign the values of letter and number to make up the hex address (eg K23) * @static * setAttributes * @param {object} hex- the hex object */ static setAttributes(hex) { hex.letter = Convert.toAscii(hex.coordinate.y) hex.number = hex.coordinate.x + 16 hex.number -= Math.floor(hex.coordinate.y / 2) } /** * Adds a unit to the hex.units array * @param {object} unit - the unit to be added */ addUnit (unit) { if (!unit) return; this.units.push(unit) unit.location = 2; unit.hex = this; } /** * Adds or combines units when unit placed onto map from (eg) forcepool, combining the unit if possible *@param {object} unit - the unit to be placed on the map */ addOrCombineUnit (unit) { for (var i = 0; i &lt; this.units.length; i++) { if (unit.canCombineWith(this.units[i])) { this.units[i].strength += unit.strength; unit.owner.removeUnit(unit); return; } } this.addUnit(unit) } /** * Combines units all units on the current hex, so far as possible *@param {object} unit - the unit to be combined in this operation */ combineAllUnits (unit) { var combined = this.combineUnit(unit) while (combined) { combined = this.combineUnit(unit) } } /** * Combine two units on the current hex, if possible * @param {object} unit - the unit to be combined in this operation * @returns {boolean} */ combineUnit (unit) { for (var i = 0; i &lt; this.units.length; i++) { if (unit.canCombineWith(this.units[i])) { unit.strength += this.units[i].strength; unit.owner.removeUnit(this.units[i]); this.removeUnit(this.units[i]); return true; } } return false; } /** * Gets the top unit in the array (treated as stack) * @returns {object} unit - the top unit in the units array */ getTopUnit () { if (!this.units || this.units.length &lt; 1) { return null } return this.units[this.units.length - 1] } /** * Removes a unit from the array * @param {object} unit - the unit to be removed */ removeUnit (unit) { this.units = this.units.filter(un =&gt; un != unit) unit.hex = null } /** * Rotates the units in the array */ rotateUnits () { var unit = this.units.shift() this.addUnit(unit) } /** * gets the owning country of the current hex * @returns {object} owner */ getOwner () { var owner = this.owner return owner } /** * writes text on the hex * @param {string} text - text to be written onto hex */ write (text) { mapCtx.fillText(text, this.pixelPoint.x + 16, this.pixelPoint.y + 30); } /** * clears the hex of any drawn objects (eg units) */ clear () { mapCtx.clearRect(this.unitStartPoint.x - 10, this.unitStartPoint.y - 9, this.width, (this.size * 1.6) - 1); } /** * draws units onto the hex */ draw () { if (game.hexControlDialogIsOpen) { this.drawFlagsOnHexes(); return; } if (this.units.length &gt; 0) { mapCtx.drawUnits(this.units, this.unitStartPoint.x, this.unitStartPoint.y); } } /** * draws flags onto the hex when the hex control dialog is open */ drawFlagsOnHexes () { if (this.owner) mapCtx.drawImage(this.owner.flagImage, this.unitStartPoint.x + 7, this.unitStartPoint.y + 7); } /** * gets the background image for the hex * @returns {image} background image */ getBackground () { return null; if (!this.background) this.background = backgroundCtx.getImageDataSafely(this.unitStartPoint.x - 10, this.unitStartPoint.y - 9, this.width, (this.size * 1.6)); return this.background; } /** * gets a larger background image for the hex * @returns {image} large background image */ getLargeBackground () { if (!this.largeBackground) { try { var x = this.unitStartPoint.x - 17; var y = this.unitStartPoint.y - 18; var w = this.width + 20; var h = (this.size * 1.6) + 30; this.largeBackground = backgroundCtx.getImageDataSafely(x, y, w, h); } catch (err) { return null; } } return this.largeBackground; } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Shipyard_shipyard-class.js.html":{"id":"Shipyard_shipyard-class.js.html","title":"Source: Shipyard/shipyard-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Shipyard/shipyard-class.js 'use strict'; /** * creates a WP.Shipyard, a container handling construction and repair of ships * @class */ WP.Shipyard = class { /** * Create a shipyard */ constructor () { /** * @property {number} id -identification code of the shipyard * @property {string} name - name of the shipyard * @property {object} owner - country object to which shipyard belongs * @property {number} rate - shipbuilding rate (ship advances(or new keels laid down)/turn)of the shipyard * @property {object} unitHolder - currently instantiated holder object for the stacks of units in the shipyard * @property {object} shipyardUnits - naval units currently in the shipyard * @property {number} currentSquareX - x coordinate(of shipyard grid) of the currently selected unit * @property {number} currentSquareY - y coordinate(of shipyard grid) of the currently selected unit * @property {boolean} dragging - whether the currently selected unit can be dragged */ this.id = null; this.name = null; this.owner = null; this.rate = null; this.unitHolder = null; this.shipyardUnits = []; this.currentSquareX = null; this.currentSquareY = null; this.dragging = false; } /** * Build an instance of shipyard * @static * shipyardBuilder * @param {number} id - the shipyard id number * @param {string} name - the shipyard name e.g. Glasgow * @param {object} owner - the country to which the shipyard belongs * @param {number} rate - the number of ship advances per turn that can be handled, linked to shipard capacity * @returns {object} Instance of shipyard */ static shipyardBuilder (id, name, owner, rate) { var shipyard = new WP.Shipyard(); shipyard.id = id; shipyard.name = name; shipyard.owner = owner; shipyard.rate = rate; return shipyard; } /** * Adds a unit to the shipyard * @param {object} shipyardUnit - the unit to be added to the shipyard */ addShipyardUnit (shipyardUnit) { this.shipyardUnits.push(shipyardUnit) } /** * Removes a unit from the shipyard * @param {object} shipyard - this shipyard instance from which the unit will be removed * @param {object} unit - the unit to be removed from the shipyard */ removeUnitFrom (shipyard, unit) { shipyard = game.getShipyardFromUnit(unit.id); var j = 0; while (j &lt; shipyard.shipyardUnits.length) { if (shipyard.shipyardUnits[j].id == unit.id) { shipyard.shipyardUnits.splice(j, 1); } else { j++; } } } /** * Updates the current address of the unit in the shipyard to match the address of the unit * @param {object} unit - the unit to which the shipyard address must be matched */ updateShipyardUnitAddress (unit) { var shipyard = game.getShipyardFromUnit(unit.id); for (var i = 0; i &lt; shipyard.shipyardUnits.length; i++) { if (shipyard.shipyardUnits[i].id == unit.id) { shipyard.shipyardUnits[i].x = unit.holderX; shipyard.shipyardUnits[i].y = unit.holderY; } } } /** * Upon selecting a shipyard, this function draws a new flag and updates details * @param {number} id - the id of the shipyard */ handleShipyardSelected (id) { var shipyard = game.getShipyards(id); var ctyName = shipyard.owner; var cty = game.getCountryFromName(ctyName); var rate = shipyard.rate; var capacity; if (((shipyard.name == &quot;Atlantic&quot;) || (shipyard.name == &quot;Pacific&quot;)) &amp;&amp; (rate &lt;= 5)) { capacity = 10; } else { capacity = rate * 2; } $(&quot;#syCountryFlag&quot;).attr(&quot;src&quot;, WP.Country.UI.getFlagUrl(cty)); $(&quot;#syRate&quot;).html(rate); $(&quot;#syCapacity&quot;).html(capacity); shipyard.draw(); } /** * Increments the shipyard building rate * @param {number} id - the id of the shipyard */ changeRateUp (id) { var shipyard = game.getShipyards(id); shipyard.rate++; shipyard.handleShipyardSelected(id); } /** * Decrements the shipyard building rate * @param {number} id - the id of the shipyard */ changeRateDown (id) { var shipyard = game.getShipyards(id); shipyard.rate--; shipyard.handleShipyardSelected(id); } /** * Upon clicking the mouse button, this function finds the unit in the shipyard display under the mouse cursor * @param {object} e - the mouse event object */ onMouseDown (e) { var point = getPoint('shipyardCanvas', e); var stack = shipyard.unitHolder.findStackFor(point.x, point.y); if (stack) { game.setSelectedUnit(stack.getTopUnit()); shipyard.unitHolder.drawStack(stack); shipyard.dragging = true; } else { game.setSelectedUnit(null); } } /** * Upon double clicking the mouse, this function rotates the units in the stack under the mouse cursor */ onDoubleClick () { var unit = game.selectedUnit; var stack = shipyard.unitHolder.findStackContaining(unit); if (!stack) { return; } game.setSelectedUnit(null); if (stack.units.length &gt; 1) { stack.rotateUnits(); shipyard.unitHolder.drawStack(stack); } } /** * Upon moving the mouse, this function drags the currently selected unit * @param {object} e - the mouse event object */ onMouseMove (e) { shipyard.setCurrentSquare(e); if (game.selectedUnit &amp;&amp; shipyard.dragging == true) { var unit = game.selectedUnit; if ((shipyard.currentSquareX != unit.holderX) || (shipyard.currentSquareY != unit.holderY)) { shipyard.moveUnit(unit); } } } /** * Upon letting go of the mouse button, this function stops dragging the currently selected unit */ onMouseUp () { shipyard.dragging = false } /** * Upon moving the mouse, this function finds the shipyard square currently under the cursor * @param {object} e - the mouse event object */ setCurrentSquare (e) { var point = getPoint('shipyardCanvas', e); this.currentSquareX = Math.floor((point.x - 10) / 66); this.currentSquareY = Math.floor((point.y - 30) / 66); if (this.currentSquareY &lt; 0) this.currentSquareY = 0; if (this.currentSquareX &lt; 0) this.currentSquareX = 0; if ((this.currentSquareX &lt; 1) &amp;&amp; (this.currentSquareY &lt; 5)) this.currentSquareX = 1; } /** * Updates the unit address to match its location after being dragged * @param {object} unit - the unit that has been moved */ moveUnit (unit) { var stack = shipyard.unitHolder.findStackContaining(unit); stack.removeUnit(unit); unit.holderX = shipyard.currentSquareX; unit.holderY = shipyard.currentSquareY; shipyard.updateShipyardUnitAddress(unit); shipyard.unitHolder.drawShipyard(); } /** * Draws the units onto the shipyard display */ draw () { var syd = game.getShipyards($('#syYard').val()); var cty = game.getCountryFromName(syd.owner); var units = [] var holder = WP.UnitHolder.unitHolderBuilder(shipyardCtx, $(&quot;#syDetails&quot;)); syd.shipyardUnits.forEach(syUnit =&gt; { var unit = game.getUnitForShipyard(syUnit.id, syUnit.x, syUnit.y) units.push(unit) }) holder.units = units; holder.drawShipyard(); shipyard.unitHolder = holder; } } // WP.Shipyard = function () { // this.id = null; // this.name = null; // this.owner = null; // this.rate = null; // this.unitHolder = null; // this.shipyardUnits = new Array(); // this.currentSquareX = null; // this.currentSquareY = null; // this.dragging = false; // } // WP.Shipyard.Util = { // shipyardBuilder: function (id, name, owner, rate) { // var shipyard = new WP.Shipyard(); // shipyard.id = id; // shipyard.name = name; // shipyard.owner = owner; // shipyard.rate = rate; // return shipyard; // } // } // WP.Shipyard.prototype.addShipyardUnit = function (shipyardUnit) { // this.shipyardUnits.push(shipyardUnit); // //shipyardUnit.owner = this; // } // // WP.Shipyard.prototype.removeUnitFromShipyard = function (shipyard, unit) { // // shipyard = game.getShipyardFromUnit(unit.id); // // var j = 0; // // while (j &lt; shipyard.shipyardUnits.length) { // // if (shipyard.shipyardUnits[j].id == unit.id) { // // shipyard.shipyardUnits.splice(j, 1); // // } // // else { // // j++; // // } // // } // // } // WP.Shipyard.prototype.removeUnitFrom = function (shipyard, unit) { // shipyard = game.getShipyardFromUnit(unit.id); // var j = 0; // while (j &lt; shipyard.shipyardUnits.length) { // if (shipyard.shipyardUnits[j].id == unit.id) { // shipyard.shipyardUnits.splice(j, 1); // } // else { // j++; // } // } // } // WP.Shipyard.prototype.updateShipyardUnitAddress = function (unit) { // var shipyard = game.getShipyardFromUnit(unit.id); // for (var i = 0; i &lt; shipyard.shipyardUnits.length; i++) { // if (shipyard.shipyardUnits[i].id == unit.id) { // shipyard.shipyardUnits[i].x = unit.holderX; // shipyard.shipyardUnits[i].y = unit.holderY; // } // } // // var syUnits = game.getShipyardFromUnit(unit.id).shipyardUnits // // syUnits.forEach(su =&gt; { // // if (su.id == unit.id) { // // su.x = unit.holderX // // su.y = unit.holderY // // } // // }) // } // WP.ShipyardUnit = function () { // this.id = null; // this.x = null; // this.y = null; // } // WP.ShipyardUnit.Util = { // shipyardUnitBuilder: function (id, x, y) { // var shipyardUnit = new WP.ShipyardUnit(); // shipyardUnit.id = id; // shipyardUnit.x = x; // shipyardUnit.y = y; // return shipyardUnit; // } // } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Taskforce_taskforce-class.js.html":{"id":"Taskforce_taskforce-class.js.html","title":"Source: Taskforce/taskforce-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Taskforce/taskforce-class.js 'use strict'; /** * creates a WP.Taskforce, a container to group naval and naval air units * @class */ WP.Taskforce = class { /** * Create a taskforce */ constructor () { /** * @property {number} id - id of the taskforce * @property {object} owner - country object to which taskforce belongs * @property {number} size - number of taskforces that this country can have at one time * @property {object} taskforceUnits - individual ships and NAS in current taskforce object * @property {object} unitHolder - currently instantiated holder object for the stacks of units in the taskforce * @property {number} currentSquareX - x coordinate(of taskforce grid) of the currently selected unit * @property {number} currentSquareY - y coordinate(of taskforce grid) of the currently selected unit * @property {boolean} dragging - whether the currently selected unit can be dragged */ this.id = null; this.owner = null; this.size = null; this.taskforceUnits = new Array(); this.unitHolder = null; this.currentSquareX = null; this.currentSquareY = null; this.dragging = false; } /** * Build an instance of taskforce * @static * taskforceBuilder * @param {number} id - the taskforce id number * @param {object} owner - the country to which the taskforce belongs * @param {number} size - the number of factors currently in the taskforce * @returns {object} instance of taskforce */ static taskforceBuilder (id, owner, size) { var taskforce = new WP.Taskforce() taskforce.id = id taskforce.owner = owner; taskforce.size = size; return taskforce; } /** * Adds a unit to the taskforce * @param {object} taskforceUnit - the unit to be added to the taskforce */ addTaskforceUnit (taskforceUnit) { this.taskforceUnits.push(taskforceUnit) } /** * Removes a unit from the taskforce * @param {object} taskforce - this taskforce instance from which the unit will be removed * @param {object} unit - the unit to be removed from the taskforce */ removeUnitFrom (taskforce, unit) { var taskforce = game.selectedTaskforce; var j = 0; while (j &lt; taskforce.taskforceUnits.length) { if (taskforce.taskforceUnits[j].id == unit.id) { taskforce.taskforceUnits.splice(j, 1); } else { j++; } } } /** * Updates the current address of the unit in the taskforce to match the address of the unit * @param {object} unit - the unit to which the taskforce address must be matched */ updateTaskforceUnitAddress (unit) { var taskforce = game.selectedTaskforce; for (var i = 0; i &lt; taskforce.taskforceUnits.length; i++) { if (taskforce.taskforceUnits[i].id == unit.id) { taskforce.taskforceUnits[i].x = unit.holderX; taskforce.taskforceUnits[i].y = unit.holderY; } } } /** * Draws the units onto the taskforce display */ draw () { var tf = game.selectedTaskforce; var units = new Array(); for (var i = 0; i &lt; tf.taskforceUnits.length; i++) { var taskforceUnit = tf.taskforceUnits[i]; var unit = game.getUnitForTaskforce(taskforceUnit.id, taskforceUnit.x, taskforceUnit.y); units.push(unit); } var holder = WP.UnitHolder.unitHolderBuilder(taskforceCtx, $(&quot;#tfDetails&quot;)); holder.units = units; holder.drawTaskforce(); taskforce.unitHolder = holder; } /** * Upon selecting a taskforce owner, this function draws a new flag and updates details * @param {object} owner - the current owner of the taskforce */ handleTaskforceSelected (owner) { var taskforce = game.getTaskforceFromOwner(owner); var cty = game.getCountryFromName(owner); game.setSelectedTaskforce(taskforce); $(&quot;#tfCountryFlag&quot;).attr(&quot;src&quot;, WP.Country.UI.getFlagUrl(cty)); taskforce.draw(); } /** * Upon clicking the mouse button, this function finds the unit in the taskforce display under the mouse cursor * @param {object} e - the mouse event object */ onMouseDown (e) { var point = getPoint('taskforceCanvas', e); var stack = taskforce.unitHolder.findStackFor(point.x, point.y); if (stack) { game.setSelectedUnit(stack.getTopUnit()); taskforce.unitHolder.drawStack(stack); taskforce.dragging = true; } else { game.setSelectedUnit(null); } } /** * Upon double clicking the mouse, this function rotates the units in the stack under the mouse cursor */ onDoubleClick () { var unit = game.selectedUnit; var stack = taskforce.unitHolder.findStackContaining(unit); if (!stack) { return; } game.setSelectedUnit(null); if (stack.units.length &gt; 1) { stack.rotateUnits(); taskforce.unitHolder.drawStack(stack); } } /** * Upon moving the mouse, this function drags the currently selected unit * @param {object} e - the mouse event object */ onMouseMove (e) { taskforce.setCurrentSquare(e); if (game.selectedUnit &amp;&amp; taskforce.dragging == true) { var unit = game.selectedUnit; if ((taskforce.currentSquareX != unit.holderX) || (taskforce.currentSquareY != unit.holderY)) { taskforce.moveUnit(unit); } } } /** * Upon letting go of the mouse button, this function stops dragging the currently selected unit */ onMouseUp () { taskforce.dragging = false } /** * Upon moving the mouse, this function finds the taskforce square currently under the cursor * @param {object} e - the mouse event object */ setCurrentSquare (e) { var point = getPoint('taskforceCanvas', e); this.currentSquareX = Math.floor((point.x - 4) / 58); this.currentSquareY = Math.floor((point.y - 7) / 58); if (this.currentSquareY &lt; 0) this.currentSquareY = 0; if (this.currentSquareX &lt; 0) this.currentSquareX = 0; } /** * Updates the unit address to match its location after being dragged * @param {object} unit - the unit that has been moved */ moveUnit (unit) { var stack = taskforce.unitHolder.findStackContaining(unit); stack.removeUnit(unit); unit.holderX = taskforce.currentSquareX; unit.holderY = taskforce.currentSquareY; taskforce.updateTaskforceUnitAddress(unit); taskforce.unitHolder.drawTaskforce(); } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"Unit_unit-class.js.html":{"id":"Unit_unit-class.js.html","title":"Source: Unit/unit-class.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: Unit/unit-class.js 'use strict'; /** * Represents a WP.Unit any of Air, naval, ground, misc. E.g. battleship, beach defense, infantry, aaf * @class */ WP.Unit = class { /** * Create a unit */ constructor () { /** * @property {number} id - id of the unit * @property {number} fpg - current forcepool grouping containing unit (if any) * @property {string} type - type of unit (e.g. destroyer, armor, bomber) * @property {string} name - name of unit e.g. Tirpitz * @property {number} size - pixel width and height of unit * @property {boolean} factorable - unit can have variable strength, can be combined and broken down * @property {number} strength - strength of unit (in factors) * @property {number} movement - number of open hexes that a unit can move, or range for air units * @property {number} location - location of unit. 1 = map, 2 = forcepool * @property {object} hex - current hex object holding unit * @property {string} image - path to image src, if needed * @property {object} owner - country object to which unit belongs * @property {object} taskforceOwner - taskforce object to which unit belongs * @property {object} yard - shipyard object to which unit belongs * @property {number} holderX - x-axis address of unit in taskforce or shipyard * @property {number} holderY - y-axis address of unit in taskforce or shipyard * @property {boolean} damaged - if unit is damaged * @property {boolean} highlight - whether the unit is highlighted currently * @property {boolean} eliminated - whether the unit is marked as eliminated * @property {boolean} slow - whether unit is a slow ship * @property {boolean} sunk - whether unit is a sunk ship * @property {boolean} inverted - whether unit is an inverted air or naval unit * @property {boolean} exploiting - whether unit is an exploiting armor unit * @property {boolean} isolated - whether unit is currently isolated and marked for elimination */ this.id = -1; this.fpg = 0; this.type = null; this.name = null; this.size = 41; this.factorable = false; this.strength = 0; this.movement = 0; this.location = 0; this.hex = null; this.image = null; this.owner = null; this.taskforceOwner = null; this.yard = null; this.holderX = null; this.holderY = null; this.damaged = false; this.eliminated = false; this.highlight = null; this.slow = false; this.sunk = false; this.inverted = false; this.exploiting = false; this.isolated = false; } /** * Build an instance of unit * @static * unitBuilder * @param {number} id - The unit id number * @param {number} fpg - the forcepool grouping that currently contains the unit * @param {string} type - the unit type * @param {string} name - name of unit, printed on side * @param {number} strength - the factor strength of the unit * @param {number} movement - the movement value if land unit, range if an air unit * @param {number} location - indicates current location of unit. 1 = forcepool, 2 = map, 3 = taskforce * @param {boolean} slow - indicates whether unit is slow for marking with orange band (old BB3 battleships only, CVE's which are also slow have separate coloring) * @param {boolean} sunk - shows whether a ship(only) is to be marked as sunk * @param {boolean} damaged - shows whether a unit is to be marked as damaged * @param {boolean} inverted - shows whether unit (air or naval) is to be marked as inverted * @param {boolean} exploiting - shows whether armor(only) unit is currently exploiting * @param {boolean} isolated - shows whether unit is marked as isolated, and subject to end of turn elimination if supply not reestablished * @param {boolean} factorable - indicates whether unit can be combined or broken down into different strength factors * @returns {object} an instance of the Unit class */ static unitBuilder (id, fpg, type, name, strength, moves, location, slow, sunk, damaged, inverted, exploiting, isolated) { var unit = new WP.Unit(); unit.id = id; unit.fpg = fpg; unit.type = type; unit.name = name; unit.strength = strength; unit.movement = moves; unit.location = location; unit.slow = slow; unit.sunk = sunk; unit.damaged = damaged; unit.inverted = inverted; unit.exploiting = exploiting; unit.isolated = isolated; switch (type.toLowerCase()) { case &quot;aaf&quot;: case &quot;aas-attack&quot;: case &quot;aas-cover&quot;: case &quot;aas-search&quot;: case &quot;advsub&quot;: case &quot;airtransport&quot;: case &quot;at&quot;: case &quot;asw&quot;: case &quot;avg&quot;: case &quot;bomber&quot;: case &quot;pacificbomber&quot;: case &quot;partialsupply&quot;: case &quot;cruiser&quot;: case &quot;cve&quot;: case &quot;damage&quot;: case &quot;destroyer&quot;: case &quot;dd&quot;: case &quot;enas&quot;: case &quot;elitenas&quot;: case &quot;flak&quot;: case &quot;grant&quot;: case &quot;ic&quot;: case &quot;interceptor&quot;: case &quot;isolation&quot;: case &quot;jet&quot;: case &quot;kamikaze&quot;: case &quot;nas&quot;: case &quot;oil&quot;: case &quot;oilplant&quot;: case &quot;sub&quot;: case &quot;transport&quot;: case &quot;tr&quot;: unit.factorable = true; break; default: unit.factorable = false; break; } return unit; } /** * Checks to see if unit can be counted toward attrition totals * @returns {boolean} */ canBeCountedInAttrition () { if (this.factorable) return false; if (this.strength &lt; 1) return false; switch (this.type.toLowerCase()) { case &quot;airborne&quot;: case &quot;armor&quot;: case &quot;arm&quot;: case &quot;chindit&quot;: case &quot;commando&quot;: case &quot;infantry&quot;: case &quot;i&quot;: case &quot;marine&quot;: case &quot;mechanized&quot;: case &quot;mech&quot;: return true; default: return false; } return false; } /** * Checks to see if unit can be damaged * @returns {boolean} */ canBeDamaged () { switch (this.type.toLowerCase()) { case &quot;battleship&quot;: case &quot;bb&quot;: case &quot;b&quot;: case &quot;bc&quot;: case &quot;carrier&quot;: case &quot;cv&quot;: case &quot;cve&quot;: case &quot;transport&quot;: case &quot;tr&quot;: case &quot;cruiser&quot;: case &quot;cve&quot;: case &quot;destroyer&quot;: case &quot;dd&quot;: case &quot;oilplant&quot;: case &quot;fortress&quot;: case &quot;ic&quot;: return true; default: return false; } } /** * Checks to see if unit can be inverted * @returns {boolean} */ canBeInverted () { switch (this.type.toLowerCase()) { case &quot;battleship&quot;: case &quot;bb&quot;: case &quot;b&quot;: case &quot;bc&quot;: case &quot;carrier&quot;: case &quot;cv&quot;: case &quot;cve&quot;: case &quot;transport&quot;: case &quot;tr&quot;: case &quot;cruiser&quot;: case &quot;cve&quot;: case &quot;destroyer&quot;: case &quot;dd&quot;: case &quot;aaf&quot;: case &quot;nas&quot;: case &quot;enas&quot;: case &quot;kamikaze&quot;: case &quot;sub&quot;: case &quot;advsub&quot;: case &quot;aas-cover&quot;: case &quot;aas-attack&quot;: case &quot;aas-search&quot;: case &quot;avg&quot;: case &quot;bomber&quot;: case &quot;interceptor&quot;: case &quot;oil&quot;: case &quot;jet&quot;: case &quot;jetsquadron&quot;: case &quot;taskforce&quot;: return true; default: return false; } } /** * Checks to see if unit can be marked as isolated * @returns {boolean} */ canBeIsolated () { switch (this.type.toLowerCase()) { case &quot;infantry&quot;: case &quot;i&quot;: case &quot;mechanized&quot;: case &quot;mech&quot;: case &quot;armor&quot;: case &quot;arm&quot;: case &quot;airborne&quot;: case &quot;marine&quot;: case &quot;chindit&quot;: case &quot;commando&quot;: case &quot;replacement&quot;:case &quot;rep&quot;: return true; default: return false; } } /** * Checks to see if unit can be sunk * @returns {boolean} */ canSink () { switch (this.type.toLowerCase()) { case &quot;battleship&quot;: case &quot;bb&quot;: case &quot;b&quot;: case &quot;bc&quot;: case &quot;pb&quot;: case &quot;carrier&quot;: case &quot;cv&quot;: case &quot;cve&quot;: case &quot;transport&quot;: case &quot;cruiser&quot;: case &quot;cve&quot;: case &quot;destroyer&quot;: case &quot;dd&quot;: return true; default: return false; } return false; } /** * changes a unit by breaking down an old unit and creating a new unit * @param {number} size - strength of the new unit to be created * @returns {object} */ breakdownAndCreate (size) { if (size &gt;= this.strength) return; var oldUnit = this; oldUnit.strength -= size; var unit = WP.Unit.unitBuilder(this.id, this.fpg, this.type, this.name, size | 0, this.movement, this.location, this.slow, this.sunk, this.damaged, this.inverted); oldUnit.owner.addUnit(unit); return unit; } /** * checks to see if two units can be combined * @param {object} unit - additional unit that this unit is compared with * @returns {boolean} */ canCombineWith (unit) { if (unit == this) { return false } if (!unit.factorable) { return false } if (unit.type != this.type) { var trans = /^tr$|transport/ if (!(trans.test(unit.type) || !(trans.test(this.type)))) return false } if (unit.type == &quot;ASW&quot; || unit.type == &quot;transport&quot; || unit.type == &quot;tr&quot;) { var alliesPattern = /US|Britain/ if (alliesPattern.test(unit.owner.name) &amp;&amp; alliesPattern.test(this.owner.name)) { return true } } if (unit.owner != this.owner) { return false;} return true; } /** * checks to see if unit can exploit * @returns {boolean} */ canExploit (){ if (this.type == &quot;armor&quot; || &quot;arm&quot;) return true; return false; } /** * checks to see if this.unit is in one of a group of passed stacks * @param {Array} stacks - array of stacks to be searched to match this unit * @returns {number} identifying number for stack */ findStackThatMatches (stacks) { var res = -1 var _this = this stacks.forEach((stack, i) =&gt; { if (_this.unitTypeExistsInStack(stack)) { res = i } }) return res } /** * searches stacks to find if a unit with the same address is in * @param {object} stacks - array of stacks to be searched for unit address * @returns {number} identifying number for stack */ findStackWithSameAddress (stacks) { var res = -1 var _this = this stacks.forEach((stack, i) =&gt; { if (_this.unitHasSameAddress(stack)) { res = i } }) return res } /** * checks to see if unit is in forcepool * @returns {boolean} */ inForcepool () { if (this.location == 1) { return true } return false } /** * checks to see if unit is on map * @returns {boolean} */ onMap () { if (this.location == 2) { return true } return false } /** * returns unit to forcepool */ returnToForcepool () { this.location = 1 this.fpg = 0 if (this.factorable) { for (var i = 0; i &lt; this.owner.units.length; i++) { var unit = this.owner.units[i] if (unit == this) continue if (unit.location != 1 || unit.fpg != 0) continue if (unit.canCombineWith(this)) { unit.strength += this.strength this.owner.removeUnit(this) break } } } } /** * sets shipyardaddress on unit * @param {object} yard - the shipyard that the unit is currently in * @param {number} x - the column of the shipyard * @param {number} y - the row of the shipyard */ setShipyardAddress (yard, x, y){ this.yard = yard this.holderX = x this.holderY = y } /** * sets taskforceaddress on unit * @param {object} tfOwner - the owning power of the taskforce display * @param {number} x - the column of the taskforce * @param {number} y - the row of the taskforce */ setTaskforceAddress (tfOwner, x, y) { this.taskforceOwner = tfOwner this.holderX = x this.holderY = y } /** * searches stack to find if a unit with the same address as this.unit is in * @param {object} stack stack to be searched for unit matching address * @returns {boolean} */ unitHasSameAddress (stack) { var _this = this return stack.units.some(unit =&gt; (unit.holderX == _this.holderX) &amp;&amp; (unit.holderY == _this.holderY)) } /** * searches stack to find if a unit with the same type as this.unit is in * @param {object} stack stack to be searched for unit matching type * @returns {boolean} */ unitTypeExistsInStack (stack) { var _this = this return stack.units.some(unit =&gt; (unit.type == _this.type) &amp;&amp; (unit.strength = _this.strength)) } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"UnitStack_unitstack.js.html":{"id":"UnitStack_unitstack.js.html","title":"Source: UnitStack/unitstack.js","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Source: UnitStack/unitstack.js /* global WP */ 'use strict'; /** * A unit stack is an array of units that will be drawn one on top of the other */ WP.UnitStack = class { /** * Create a unit stack */ constructor() { /** * @property {number} x - x coordinate * @property {number} y - y coordinate * @property {object} units - array of units */ this.x = 0 this.y = 0 this.units = [] } /** * gets the top unit from the unit stack * @returns {object} top unit */ getTopUnit () { if (!this.units) { return null } return this.units[this.units.length - 1] } /** * removes unit from the unit stack * @param {object} the unit to be removed */ removeUnit (unit) { this.units = this.units.filter(u =&gt; u != unit) } /** * adds unit to the unit stack * @param {object} the unit to be added */ addUnit (unit) { if (!unit) return; this.units.push(unit); unit.stack = this; } /** * rotates units in the unit stack */ rotateUnits () { var unit = this.units.shift(); this.addUnit(unit); } } × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Classes Classes Attrition Codebreaking Country Forcepool ForcepoolGrouping Game Hex Shipyard Taskforce Unit UnitStack × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack WARPLANNER 2 FOR NODEA browser based tool to play Bruce Harper's A World At War Not finished InstallationYou must have node installed. To install, clone the repo, navigate a terminal to the directory and type npm install once the dependencies are installed npm start and navigate the browser to localhost:3000 press the play button to go to the game screen use npm run dev to use nodemon to auto-restart the server after changes BuildAt the moment, a very simple build system has been implemented. On index.html, for development, all the scripts are individually sourced. Performance is pretty slow in this state Or, the concatenated javascript file is found in ´dist/wp.min.js´ On index.html, comment out all the javascripts (but not the libraries like jquery) and uncomment out the line: &lt;script src=&quot;dist/Min/wp.min.js&quot;&gt;&lt;/script&gt; the files are not actually minified, just concatenated and stripped of comments. Uglify doesn't yet seem to play nicely with es6 classes, and i don't currently want to use babel to uglifyall the way back into es5 to concatenate your new javascripts into a new wp.min.js run: gulp concat Unit TestsI have written about a hundred simple unit tests using karma-jasmine It helped somewhat with refactoring from es4 to es6, but it is also so i can demonstrate my unit testing skillz Jsdocjsdocs are implemented with DocStrap slate to keep a unified theme with the warplanner ui The main reason is that my first paid programming job has a good chance of writing documentation and doctests for a hightech scientific simulation software so i thought it would be helpful if i had some done, but who knows, maybe documentation really is awesome! to serve up the docs, navigate to the ./out directory and run a simple server (unless i am missing something and i don't need to do all that) If you have python installed, you can make server with python -m http.server 8000 and then navigate to localhost:8000 to see the documents to build documentation with additional doc comments you need jsdoc installed globally npm install -g jsdoc then from the warplanner directory npm run jsdoc Germany SafeSince i have been advised that i cannot be showing swastikas to german employers, i have used a SFW version of the german flag. To go back to authentic, go to content/flags and find the germany flags. Rename all the germany.jpg files as germany-safe.jpg etc rename all the germany-unsafe.jpg as germany.jpg × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:51+01:00 using the DocStrap template. "},"WP.Attrition.html":{"id":"WP.Attrition.html","title":"Class: Attrition","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Attrition Attrition WP.Attrition class defines the attrition object which is created each time the attrition button is pressed new Attrition() Create an attrition object Source: Attrition/attrition-class.js Members units Properties: Name Type Description units object array of units currently counted towards the attrition total Source: Attrition/attrition-class.js Methods addUnit(unit) Adds a unit to the attrition array Parameters: Name Type Description unit object the unit to be added and counted towards attrition total Source: Attrition/attrition-class.js handleHexClick() handles the onmouseclick event, sending units to be added to the units array Source: Attrition/attrition-class.js refreshTotals() refreshes the calculated attrition total and displays the result on the dialog Source: Attrition/attrition-class.js removeUnit(unit) removes unit from the attrition units array Parameters: Name Type Description unit object the unit to be removed from the attrition units array Source: Attrition/attrition-class.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Codebreaking.html":{"id":"WP.Codebreaking.html","title":"Class: Codebreaking","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Codebreaking Codebreaking WP.Codebreaking class creates an instance of a codebreaking draw of cards new Codebreaking() Creates a codebreaking object Source: Codebreaking/codebreaking-class.js Members selected Properties: Name Type Description selected number number of cards in the pool from which 4 are drawn cards array the four cards held in this hand Source: Codebreaking/codebreaking-class.js Methods addCard(card) Adds a card to the cards array Parameters: Name Type Description card object the card to be added Source: Codebreaking/codebreaking-class.js draw() This parses year and season from the dialog html and calls showResultsFor Source: Codebreaking/codebreaking-class.js getResultFor(year, season, {number) Gets results for the current turn and faction (Western Allies, Russia, Germany or Japan) Parameters: Name Type Description year number the game year season number the season of the year (4 seasons per year) {number side - the side to which this hand belongs Source: Codebreaking/codebreaking-class.js Returns: the hand of cards is returned Type object × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Country.html":{"id":"WP.Country.html","title":"Class: Country","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Country Country WP.Country class holds all the information of a country -testing compile by jsdoc.conf.json and using opts and now also using npm to run the script new Country() Create a country Source: Country/country-class.js Members id Properties: Name Type Description id number id of country name string name of country ally number value shows allied status colonyOf object gives ruling power of this colony coalition number gives the coalition to which this country belongs (axis, western allied, russia) isOrganization boolean whether the country is an organization or not isMajorPower boolean whether country is a major power (e.g. Germany, Russia) or not (e.g. Romania, Thailand) partOf object Not sure what this property is for pacific boolean whether the country is in the pacific theater (i think - not sure what this is for, or even if needed) backColor color the background color for this country's units foreColor color the foreground color for this country's units innerColor color the color to fill the inner shield (on e.g. infantry) on this country's units lineColor color the color used for drawing lines for this country's units shadow color the shadowing color for this country's units flagImage string the path to his country's flag image forcepoolGroupings object the different groups for this country's forcepool dialog colonies object the colonies that belong to this country units object the currently instantiated units that belong to this country codebreaking object the codebreaking cards and record held for this country (actually not sure about how this works) Source: Country/country-class.js Methods &lt;static&gt; countryBuilder(id, name) Build an instance of country Parameters: Name Type Description id number The country id number name string the name of the country Source: Country/country-class.js Returns: a new country Type object &lt;static&gt; forcepoolGroupingBuilder(id, name) Build an instance of forcepoolGrouping Parameters: Name Type Description id number The forcepoolGrouping id number name string the name of the forcepoolGrouping Source: Country/country-class.js Returns: a new forcepoolGrouping Type object &lt;static&gt; sort(a, b) sort algorithm by name Parameters: Name Type Description a object object 'a' with name property b object object 'b' with name property Source: Country/country-class.js Returns: 1, 0 or -1 for sorting Type number addColony() adds a colony to the colonies array property Source: Country/country-class.js addForcepoolGrouping() adds a forcepoolGrouping to the forcepoolGroupings array property Source: Country/country-class.js addUnit() adds a unit to the units array property Source: Country/country-class.js getUnit(id) gets a unit from the units array by id Parameters: Name Type Description id number id of the requested unit Source: Country/country-class.js removeUnit(unit) removes a unit from the units array Parameters: Name Type Description unit object the unit to be removed Source: Country/country-class.js toString() converts the country name and id to a string Source: Country/country-class.js Returns: &quot;USA(5)&quot; Type string × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Forcepool.html":{"id":"WP.Forcepool.html","title":"Class: Forcepool","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Forcepool Forcepool WP.Forcepool class for creating forcepools. Forcepools are a popup dialog that contain units that have not been placed on the map or in a shipyard or taskforce these units are also put into categories (e.g. unbuilt, dow+1, air, naval, ground) new Forcepool() Create a forcepool Source: Forcepool/forcepool-class.js Members unitHolder Properties: Name Type Description unitHolder object a unitHolder object that will contain the units in the forcepool Source: Forcepool/forcepool-class.js Methods draw() Draws the units onto the forcepool display Source: Forcepool/forcepool-class.js handleCountrySelected(id) After selecting this country on the forcepool dialog, this function updates map and forcepool groupings Parameters: Name Type Description id number id of the country selected Source: Forcepool/forcepool-class.js onMouseDown(e) Upon clicking the mouse button, this function finds the unit in the shipyard display under the mouse cursor Parameters: Name Type Description e object the mouse event object Source: Forcepool/forcepool-class.js removeUnitFrom() This is an empty function that saves having to typecheck elsewhere. It's analogs in Taskforce and Shipyard do things Source: Forcepool/forcepool-class.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.ForcepoolGrouping.html":{"id":"WP.ForcepoolGrouping.html","title":"Class: ForcepoolGrouping","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: ForcepoolGrouping ForcepoolGrouping A group for the forcepool dialog new ForcepoolGrouping() Create a forcepool group Source: Country/country-class.js Members id Properties: Name Type Description id number the id of the forcepoolGrouping name string the name of the forcepoolGrouping Source: Country/country-class.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Game.html":{"id":"WP.Game.html","title":"Class: Game","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Game Game This is the God object that is the heart of the game could probably do with refactoring new Game() Create game object Source: Game/game.js Members name Properties: Name Type Description name string name of this game mapIndex number value indicates whether Europe or Pacific map zoomLevel number value shows current zoom level, default 1 gives max size (map10) type null i don't know what this is countries object the current country objects in the game maps object the map objects currentMap string the currently showing game map( europe or pacific ) selectedUnit object the currently selected unit gameType string whether a full global game or one of the smaller scenarios shipyards object array of shipyard objects taskforces object array of taskforce objects selectedTaskforce object the currently selected (open) taskforce object (and by extension dialog) state number TBD newspaper string string to be posted as white press or notes codebreakingResults object this turn's codebreaking results * @property {} hexControlDialogIsOpen boolean whether or not the dialog is open andwhether the map has flags or units drawn on it currentYear number the current game year currentSeason number the current game season currentPhaseId number the current phase Id coalition number the current side (axis or allies) currentPhase number the current game phase (linked to phaseId) showUnitTexture boolean whether the enhanced unit texture is shown, or the flat color noSwastikas boolean whether swastikas should be shown (illegal to show in Germany) Source: Game/game.js Methods &lt;static&gt; gameBuilder() Build a game instance Source: Game/game.js addCodebreakingResult(result) adds a codebreaking result to the game codebreakingResults array Parameters: Name Type Description result object result to be added Source: Game/game.js addCountry(country) adds a country to the game countries array Parameters: Name Type Description country object country to be added Source: Game/game.js addShipyard(shipyard) adds a shipyards to the game shipyards array Parameters: Name Type Description shipyard object shipyard to be added Source: Game/game.js addTaskforce(taskforce) adds a taskforce to the game taskforces array Parameters: Name Type Description taskforce object taskforce to be added Source: Game/game.js addUnitToHex(unit, hex, stack) adds a unit to a hex Parameters: Name Type Description unit object unit to be added hex object hex to which unit is added stack object stack to which unit is added Source: Game/game.js getAllHighlightedUnits() gets all currently highlighted units Source: Game/game.js Returns: array of units Type object getCountry(id) gets country by id Parameters: Name Type Description id number id of the country Source: Game/game.js Returns: country Type object getCountryFromName(name) gets country by name Parameters: Name Type Description name string name of the country Source: Game/game.js Returns: country Type object getCurrentMapId() gets the current map Id Source: Game/game.js Returns: the map id Type number getMajorPowers() gets the list of major powers Source: Game/game.js Returns: array of major powers Type object getShipyardFromName(name) gets shipyard by name Parameters: Name Type Description name string name of the shipyard Source: Game/game.js Returns: shipyard Type object getShipyardFromUnit(unitId) gets shipyard from the urrently selected unit Parameters: Name Type Description unitId number currently selected unitId Source: Game/game.js Returns: shipyard Type object getShipyards(id) gets shipyard by id Parameters: Name Type Description id number shipyard id number Source: Game/game.js Returns: shipyard Type object getTaskforceFromOwner(owner) gets taskforce by owner Parameters: Name Type Description owner object the owning country Source: Game/game.js Returns: taskforce Type object getTaskforceFromUnit(unitId) gets taskforce from the currently selected unit id Parameters: Name Type Description unitId number currently selected unit id Source: Game/game.js Returns: taskforce Type object getTaskforces(id) gets taskforce by id Parameters: Name Type Description id number taskforce id number Source: Game/game.js Returns: taskforce Type object getUnitForShipyard(id, x, y) gets a unit from the shipyard Parameters: Name Type Description id number the unit id x number x coordinate of unit (in the shipyard) y number y coordinate of unit (in the shipyard) Source: Game/game.js getUnitForTaskforce(id, x, y) gets a unit from the taskforce Parameters: Name Type Description id number the unit id x number x coordinate of unit (in the taskforce) y number y coordinate of unit (in the taskforce) Source: Game/game.js getUnitFromCountryForGridDialog(id, x, y) gets a unit from the country for a shipyard or taskforce Parameters: Name Type Description id number the unit id x number x coordinate of unit (in the dialog) y number y coordinate of unit (in the dialog) Source: Game/game.js handleSelectUnselectInDialog() redraws dialog upon select and unselect unit Source: Game/game.js handleSelectUnselectOnBoard() redraws hexes upon select and unselect unit Source: Game/game.js refreshCurrentTheater() refreshes current theater Source: Game/game.js setCurrentDate(currentPhaseId, year, season) sets the current date Parameters: Name Type Description currentPhaseId number the current Phase Id year number the current year season number the current season Source: Game/game.js setInfoBarButtons() handles infobar buttons - not used anymore in this ui Source: Game/game.js setSelectedTaskforce() sets currently selected taskforce Source: Game/game.js setSelectedUnit() sets currently selected unit - triggers redrawing upon change Source: Game/game.js switchTheaters() switched between europe and pacific theaters Source: Game/game.js toggleNoSwastikas(noSwastikas) toggles swastikas on and off Parameters: Name Type Description noSwastikas boolean Source: Game/game.js toggleShowUnitTexture(showTexture) toggles unit texture on and off Parameters: Name Type Description showTexture boolean Source: Game/game.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Hex.html":{"id":"WP.Hex.html","title":"Class: Hex","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Hex Hex creates a WP.Hex. This object has the details of the hex, from terrain, cities, ports and map location and dimensions, to owning country, and units on it new Hex() Create a hex object Source: Hex/hex-class.js Members id Properties: Name Type Description id number identification code of the hex map object the map object to which the hex belongs letter string alphabetical part of the hex address (eg the K in hex: K23) number number numerical part of the hex address (ed the 23 in hex: K23) size number value for determining hex size and boundaries width number value for determining hex width and boundaries owner object country object currently controlling this hex cityName string name of city on this hex(e.g. Cologne) isPort boolean whether the hex is a port (e.g. Oran) isCapital boolean whether the hex is a capital city (e.g. Paris) isBeach boolean whether the hex has a beach (e.g. Bergen) isTerrain boolean whether the hex has terrain features (e.g. mountains) isIsland boolean whether the hex is a one-hex island (e.g Guadalcanal) units array the units currently on this hex coordinate object coordinates of hex pixelPoint object coordinates within hex for positioning text unitStartPoint object coordinates within hex for placing first unit background imagee piece of the main map that shows hex background largeBackground image large piece of the main map to be used as hex background setZoom call calls WP.Hex.UI.setHexZoom toString function takes letter and number and returns a string for the hex address (eg K23) Source: Hex/hex-class.js Methods &lt;static&gt; setAttributes(hex-) Assign the values of letter and number to make up the hex address (eg K23) Parameters: Name Type Description hex- object the hex object Source: Hex/hex-class.js addOrCombineUnit(unit) Adds or combines units when unit placed onto map from (eg) forcepool, combining the unit if possible Parameters: Name Type Description unit object the unit to be placed on the map Source: Hex/hex-class.js addUnit(unit) Adds a unit to the hex.units array Parameters: Name Type Description unit object the unit to be added Source: Hex/hex-class.js clear() clears the hex of any drawn objects (eg units) Source: Hex/hex-class.js combineAllUnits(unit) Combines units all units on the current hex, so far as possible Parameters: Name Type Description unit object the unit to be combined in this operation Source: Hex/hex-class.js combineUnit(unit) Combine two units on the current hex, if possible Parameters: Name Type Description unit object the unit to be combined in this operation Source: Hex/hex-class.js Returns: Type boolean draw() draws units onto the hex Source: Hex/hex-class.js drawFlagsOnHexes() draws flags onto the hex when the hex control dialog is open Source: Hex/hex-class.js getBackground() gets the background image for the hex Source: Hex/hex-class.js Returns: background image Type image getLargeBackground() gets a larger background image for the hex Source: Hex/hex-class.js Returns: large background image Type image getOwner() gets the owning country of the current hex Source: Hex/hex-class.js Returns: owner Type object getTopUnit() Gets the top unit in the array (treated as stack) Source: Hex/hex-class.js Returns: unit - the top unit in the units array Type object removeUnit(unit) Removes a unit from the array Parameters: Name Type Description unit object the unit to be removed Source: Hex/hex-class.js rotateUnits() Rotates the units in the array Source: Hex/hex-class.js write(text) writes text on the hex Parameters: Name Type Description text string text to be written onto hex Source: Hex/hex-class.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Shipyard.html":{"id":"WP.Shipyard.html","title":"Class: Shipyard","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Shipyard Shipyard creates a WP.Shipyard, a container handling construction and repair of ships new Shipyard() Create a shipyard Source: Shipyard/shipyard-class.js Members id Properties: Name Type Description id number identification code of the shipyard name string name of the shipyard owner object country object to which shipyard belongs rate number shipbuilding rate (ship advances(or new keels laid down)/turn)of the shipyard unitHolder object currently instantiated holder object for the stacks of units in the shipyard shipyardUnits object naval units currently in the shipyard currentSquareX number x coordinate(of shipyard grid) of the currently selected unit currentSquareY number y coordinate(of shipyard grid) of the currently selected unit dragging boolean whether the currently selected unit can be dragged Source: Shipyard/shipyard-class.js Methods &lt;static&gt; shipyardBuilder(id, name, owner, rate) Build an instance of shipyard Parameters: Name Type Description id number the shipyard id number name string the shipyard name e.g. Glasgow owner object the country to which the shipyard belongs rate number the number of ship advances per turn that can be handled, linked to shipard capacity Source: Shipyard/shipyard-class.js Returns: Instance of shipyard Type object addShipyardUnit(shipyardUnit) Adds a unit to the shipyard Parameters: Name Type Description shipyardUnit object the unit to be added to the shipyard Source: Shipyard/shipyard-class.js changeRateDown(id) Decrements the shipyard building rate Parameters: Name Type Description id number the id of the shipyard Source: Shipyard/shipyard-class.js changeRateUp(id) Increments the shipyard building rate Parameters: Name Type Description id number the id of the shipyard Source: Shipyard/shipyard-class.js draw() Draws the units onto the shipyard display Source: Shipyard/shipyard-class.js handleShipyardSelected(id) Upon selecting a shipyard, this function draws a new flag and updates details Parameters: Name Type Description id number the id of the shipyard Source: Shipyard/shipyard-class.js moveUnit(unit) Updates the unit address to match its location after being dragged Parameters: Name Type Description unit object the unit that has been moved Source: Shipyard/shipyard-class.js onDoubleClick() Upon double clicking the mouse, this function rotates the units in the stack under the mouse cursor Source: Shipyard/shipyard-class.js onMouseDown(e) Upon clicking the mouse button, this function finds the unit in the shipyard display under the mouse cursor Parameters: Name Type Description e object the mouse event object Source: Shipyard/shipyard-class.js onMouseMove(e) Upon moving the mouse, this function drags the currently selected unit Parameters: Name Type Description e object the mouse event object Source: Shipyard/shipyard-class.js onMouseUp() Upon letting go of the mouse button, this function stops dragging the currently selected unit Source: Shipyard/shipyard-class.js removeUnitFrom(shipyard, unit) Removes a unit from the shipyard Parameters: Name Type Description shipyard object this shipyard instance from which the unit will be removed unit object the unit to be removed from the shipyard Source: Shipyard/shipyard-class.js setCurrentSquare(e) Upon moving the mouse, this function finds the shipyard square currently under the cursor Parameters: Name Type Description e object the mouse event object Source: Shipyard/shipyard-class.js updateShipyardUnitAddress(unit) Updates the current address of the unit in the shipyard to match the address of the unit Parameters: Name Type Description unit object the unit to which the shipyard address must be matched Source: Shipyard/shipyard-class.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Taskforce.html":{"id":"WP.Taskforce.html","title":"Class: Taskforce","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Taskforce Taskforce creates a WP.Taskforce, a container to group naval and naval air units new Taskforce() Create a taskforce Source: Taskforce/taskforce-class.js Members id Properties: Name Type Description id number id of the taskforce owner object country object to which taskforce belongs size number number of taskforces that this country can have at one time taskforceUnits object individual ships and NAS in current taskforce object unitHolder object currently instantiated holder object for the stacks of units in the taskforce currentSquareX number x coordinate(of taskforce grid) of the currently selected unit currentSquareY number y coordinate(of taskforce grid) of the currently selected unit dragging boolean whether the currently selected unit can be dragged Source: Taskforce/taskforce-class.js Methods &lt;static&gt; taskforceBuilder(id, owner, size) Build an instance of taskforce Parameters: Name Type Description id number the taskforce id number owner object the country to which the taskforce belongs size number the number of factors currently in the taskforce Source: Taskforce/taskforce-class.js Returns: instance of taskforce Type object addTaskforceUnit(taskforceUnit) Adds a unit to the taskforce Parameters: Name Type Description taskforceUnit object the unit to be added to the taskforce Source: Taskforce/taskforce-class.js draw() Draws the units onto the taskforce display Source: Taskforce/taskforce-class.js handleTaskforceSelected(owner) Upon selecting a taskforce owner, this function draws a new flag and updates details Parameters: Name Type Description owner object the current owner of the taskforce Source: Taskforce/taskforce-class.js moveUnit(unit) Updates the unit address to match its location after being dragged Parameters: Name Type Description unit object the unit that has been moved Source: Taskforce/taskforce-class.js onDoubleClick() Upon double clicking the mouse, this function rotates the units in the stack under the mouse cursor Source: Taskforce/taskforce-class.js onMouseDown(e) Upon clicking the mouse button, this function finds the unit in the taskforce display under the mouse cursor Parameters: Name Type Description e object the mouse event object Source: Taskforce/taskforce-class.js onMouseMove(e) Upon moving the mouse, this function drags the currently selected unit Parameters: Name Type Description e object the mouse event object Source: Taskforce/taskforce-class.js onMouseUp() Upon letting go of the mouse button, this function stops dragging the currently selected unit Source: Taskforce/taskforce-class.js removeUnitFrom(taskforce, unit) Removes a unit from the taskforce Parameters: Name Type Description taskforce object this taskforce instance from which the unit will be removed unit object the unit to be removed from the taskforce Source: Taskforce/taskforce-class.js setCurrentSquare(e) Upon moving the mouse, this function finds the taskforce square currently under the cursor Parameters: Name Type Description e object the mouse event object Source: Taskforce/taskforce-class.js updateTaskforceUnitAddress(unit) Updates the current address of the unit in the taskforce to match the address of the unit Parameters: Name Type Description unit object the unit to which the taskforce address must be matched Source: Taskforce/taskforce-class.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:52+01:00 using the DocStrap template. "},"WP.Unit.html":{"id":"WP.Unit.html","title":"Class: Unit","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: Unit Unit Represents a WP.Unit any of Air, naval, ground, misc. E.g. battleship, beach defense, infantry, aaf new Unit() Create a unit Source: Unit/unit-class.js Members id Properties: Name Type Description id number id of the unit fpg number current forcepool grouping containing unit (if any) type string type of unit (e.g. destroyer, armor, bomber) name string name of unit e.g. Tirpitz size number pixel width and height of unit factorable boolean unit can have variable strength, can be combined and broken down strength number strength of unit (in factors) movement number number of open hexes that a unit can move, or range for air units location number location of unit. 1 = map, 2 = forcepool hex object current hex object holding unit image string path to image src, if needed owner object country object to which unit belongs taskforceOwner object taskforce object to which unit belongs yard object shipyard object to which unit belongs holderX number x-axis address of unit in taskforce or shipyard holderY number y-axis address of unit in taskforce or shipyard damaged boolean if unit is damaged highlight boolean whether the unit is highlighted currently eliminated boolean whether the unit is marked as eliminated slow boolean whether unit is a slow ship sunk boolean whether unit is a sunk ship inverted boolean whether unit is an inverted air or naval unit exploiting boolean whether unit is an exploiting armor unit isolated boolean whether unit is currently isolated and marked for elimination Source: Unit/unit-class.js Methods &lt;static&gt; unitBuilder(id, fpg, type, name, strength, movement, location, slow, sunk, damaged, inverted, exploiting, isolated, factorable) Build an instance of unit Parameters: Name Type Description id number The unit id number fpg number the forcepool grouping that currently contains the unit type string the unit type name string name of unit, printed on side strength number the factor strength of the unit movement number the movement value if land unit, range if an air unit location number indicates current location of unit. 1 = forcepool, 2 = map, 3 = taskforce slow boolean indicates whether unit is slow for marking with orange band (old BB3 battleships only, CVE's which are also slow have separate coloring) sunk boolean shows whether a ship(only) is to be marked as sunk damaged boolean shows whether a unit is to be marked as damaged inverted boolean shows whether unit (air or naval) is to be marked as inverted exploiting boolean shows whether armor(only) unit is currently exploiting isolated boolean shows whether unit is marked as isolated, and subject to end of turn elimination if supply not reestablished factorable boolean indicates whether unit can be combined or broken down into different strength factors Source: Unit/unit-class.js Returns: an instance of the Unit class Type object breakdownAndCreate(size) changes a unit by breaking down an old unit and creating a new unit Parameters: Name Type Description size number strength of the new unit to be created Source: Unit/unit-class.js Returns: Type object canBeCountedInAttrition() Checks to see if unit can be counted toward attrition totals Source: Unit/unit-class.js Returns: Type boolean canBeDamaged() Checks to see if unit can be damaged Source: Unit/unit-class.js Returns: Type boolean canBeInverted() Checks to see if unit can be inverted Source: Unit/unit-class.js Returns: Type boolean canBeIsolated() Checks to see if unit can be marked as isolated Source: Unit/unit-class.js Returns: Type boolean canCombineWith(unit) checks to see if two units can be combined Parameters: Name Type Description unit object additional unit that this unit is compared with Source: Unit/unit-class.js Returns: Type boolean canExploit() checks to see if unit can exploit Source: Unit/unit-class.js Returns: Type boolean canSink() Checks to see if unit can be sunk Source: Unit/unit-class.js Returns: Type boolean findStackThatMatches(stacks) checks to see if this.unit is in one of a group of passed stacks Parameters: Name Type Description stacks Array array of stacks to be searched to match this unit Source: Unit/unit-class.js Returns: identifying number for stack Type number findStackWithSameAddress(stacks) searches stacks to find if a unit with the same address is in Parameters: Name Type Description stacks object array of stacks to be searched for unit address Source: Unit/unit-class.js Returns: identifying number for stack Type number inForcepool() checks to see if unit is in forcepool Source: Unit/unit-class.js Returns: Type boolean onMap() checks to see if unit is on map Source: Unit/unit-class.js Returns: Type boolean returnToForcepool() returns unit to forcepool Source: Unit/unit-class.js setShipyardAddress(yard, x, y) sets shipyardaddress on unit Parameters: Name Type Description yard object the shipyard that the unit is currently in x number the column of the shipyard y number the row of the shipyard Source: Unit/unit-class.js setTaskforceAddress(tfOwner, x, y) sets taskforceaddress on unit Parameters: Name Type Description tfOwner object the owning power of the taskforce display x number the column of the taskforce y number the row of the taskforce Source: Unit/unit-class.js unitHasSameAddress(stack) searches stack to find if a unit with the same address as this.unit is in Parameters: Name Type Description stack object stack to be searched for unit matching address Source: Unit/unit-class.js Returns: Type boolean unitTypeExistsInStack(stack) searches stack to find if a unit with the same type as this.unit is in Parameters: Name Type Description stack object stack to be searched for unit matching type Source: Unit/unit-class.js Returns: Type boolean × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:53+01:00 using the DocStrap template. "},"WP.UnitStack.html":{"id":"WP.UnitStack.html","title":"Class: UnitStack","body":" Warplanner Classes WP.AttritionWP.CodebreakingWP.CountryWP.ForcepoolWP.ForcepoolGroupingWP.GameWP.HexWP.ShipyardWP.TaskforceWP.UnitWP.UnitStack Class: UnitStack UnitStack A unit stack is an array of units that will be drawn one on top of the other new UnitStack() Create a unit stack Source: UnitStack/unitstack.js Members x Properties: Name Type Description x number x coordinate y number y coordinate units object array of units Source: UnitStack/unitstack.js Methods addUnit(the) adds unit to the unit stack Parameters: Name Type Description the object unit to be added Source: UnitStack/unitstack.js getTopUnit() gets the top unit from the unit stack Source: UnitStack/unitstack.js Returns: top unit Type object removeUnit(the) removes unit from the unit stack Parameters: Name Type Description the object unit to be removed Source: UnitStack/unitstack.js rotateUnits() rotates units in the unit stack Source: UnitStack/unitstack.js × Search results Close Documentation generated by JSDoc 3.4.0 on 2016-02-19T12:00:53+01:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
